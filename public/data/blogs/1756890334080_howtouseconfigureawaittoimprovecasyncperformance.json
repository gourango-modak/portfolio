{
  "id": 1756890334080,
  "title": "How to Use ConfigureAwait to Improve C# Async Performance",
  "createdAt": 1756890333308,
  "tags": [],
  "description": "Learn how to boost your C# async code performance using ConfigureAwait. This blog explains the concept in simple terms with practical examples for faster, scalable, and deadlock-free applications.",
  "slug": "how-to-use-configureawait-to-improve-c-async-performance",
  "content": {
    "time": 1756890323230,
    "blocks": [
      {
        "id": "30jI7l4DTH",
        "type": "paragraph",
        "data": {
          "text": "Asynchronous programming in .NET helps apps stay responsive and handle multiple tasks at the same time. But if you want your async code to be fast and efficient, you need to understand <code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\">ConfigureAwait</code>."
        }
      },
      {
        "id": "bkmBdzk92R",
        "type": "paragraph",
        "data": {
          "text": "In this post, we’ll explain <code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\">ConfigureAwait</code> in simple terms, why it matters for performance, and show examples you can try."
        }
      },
      {
        "id": "aP4j3XxysF",
        "type": "header",
        "data": {
          "text": "What Happens When You Use&nbsp;await?",
          "level": 2
        }
      },
      {
        "id": "kUBMCntdqZ",
        "type": "paragraph",
        "data": {
          "text": "When you&nbsp;<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em; border-radius: 0.25rem; background-color: rgb(48, 48, 48); padding-inline: 4px; padding-block: 2px; color: rgb(255, 255, 255);\">await</code>&nbsp;a task in C#, the program pauses until the task finishes. Then it resumes from where it left off. By default, it tries to resume on the same thread it started on."
        }
      },
      {
        "id": "GZmusu1iD3",
        "type": "paragraph",
        "data": {
          "text": "This is important for&nbsp;UI apps&nbsp;(like WPF or WinForms) because UI controls can only be updated from the main thread."
        }
      },
      {
        "id": "VY75fzjkak",
        "type": "code",
        "data": {
          "language": "csharp",
          "code": "public async Task LoadDataAsync()\n{\n    // Running on the UI thread\n    var data = await GetDataFromApiAsync(); // pauses here\n    myLabel.Text = data; // resumes on UI thread safely\n}"
        }
      },
      {
        "id": "f-DyqF8YCB",
        "type": "paragraph",
        "data": {
          "text": "Works perfectly for UI apps. But in server apps (like ASP.NET Core), this “same thread” rule adds unnecessary overhead, slowing your app."
        }
      },
      {
        "id": "91wR45TedE",
        "type": "header",
        "data": {
          "text": "What is&nbsp;ConfigureAwait?",
          "level": 2
        }
      },
      {
        "id": "Iu5G9-a8uP",
        "type": "list",
        "data": {
          "style": "unordered",
          "meta": {},
          "items": [
            {
              "content": "<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em; border-radius: 0.25rem; background-color: rgb(48, 48, 48); padding-inline: 4px; padding-block: 2px; color: rgb(255, 255, 255);\">ConfigureAwait</code>&nbsp;tells C# whether to resume on the same thread or not.",
              "meta": {},
              "items": []
            },
            {
              "content": "<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\">ConfigureAwait(true)</code> → default behavior, resumes on the original thread.",
              "meta": {},
              "items": []
            },
            {
              "content": "<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\">ConfigureAwait(false)</code> → allows resuming on any available thread, skipping context capture.\n",
              "meta": {},
              "items": []
            }
          ]
        }
      },
      {
        "id": "YmEueR5sO_",
        "type": "header",
        "data": {
          "text": "Why It Matters",
          "level": 3
        }
      },
      {
        "id": "Zo7CARlfJ1",
        "type": "paragraph",
        "data": {
          "text": "Skipping the original thread:"
        }
      },
      {
        "id": "6_hpy22HrB",
        "type": "list",
        "data": {
          "style": "unordered",
          "meta": {},
          "items": [
            {
              "content": "Reduces delays caused by switching threads.",
              "meta": {},
              "items": []
            },
            {
              "content": "Makes server apps faster and more scalable.",
              "meta": {},
              "items": []
            },
            {
              "content": "Prevents certain deadlocks in synchronous code.",
              "meta": {},
              "items": []
            }
          ]
        }
      },
      {
        "id": "A4Tix_PJDd",
        "type": "header",
        "data": {
          "text": "Simple Example",
          "level": 3
        }
      },
      {
        "id": "VSef3ji4w7",
        "type": "paragraph",
        "data": {
          "text": "Without&nbsp;<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\">ConfigureAwait(false)</code>:"
        }
      },
      {
        "id": "UTPqe2XHlr",
        "type": "code",
        "data": {
          "language": "csharp",
          "code": "public async Task<int> CalculateAsync()\n{\n    Console.WriteLine($\"Start on Thread {Thread.CurrentThread.ManagedThreadId}\");\n    await Task.Delay(1000); // wait for 1 second\n    Console.WriteLine($\"Resume on Thread {Thread.CurrentThread.ManagedThreadId}\");\n    return 42;\n}"
        }
      },
      {
        "id": "HDIuQVXQqM",
        "type": "paragraph",
        "data": {
          "text": "The continuation may resume on the same thread, even when it’s not needed, which can waste resources."
        }
      },
      {
        "id": "svMq_S-nwy",
        "type": "paragraph",
        "data": {
          "text": "With&nbsp;<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\">ConfigureAwait(false)</code>:"
        }
      },
      {
        "id": "q-PZMuUAAT",
        "type": "code",
        "data": {
          "language": "csharp",
          "code": "public async Task<int> CalculateAsync()\n{\n    Console.WriteLine($\"Start on Thread {Thread.CurrentThread.ManagedThreadId}\");\n    await Task.Delay(1000).ConfigureAwait(false); // skip original thread\n    Console.WriteLine($\"Resume on Thread {Thread.CurrentThread.ManagedThreadId}\");\n    return 42;\n}"
        }
      },
      {
        "id": "AJIHVJ1mIH",
        "type": "paragraph",
        "data": {
          "text": "Now, the continuation can run on any available thread, making it faster and more efficient."
        }
      },
      {
        "id": "-w-7CsEFxu",
        "type": "header",
        "data": {
          "text": "Real-Life Scenario in ASP.NET Core",
          "level": 2
        }
      },
      {
        "id": "XGf_CzkeFU",
        "type": "paragraph",
        "data": {
          "text": "Imagine your web app handles 100 simultaneous requests, each fetching data from a database."
        }
      },
      {
        "id": "YJCVPpevaP",
        "type": "list",
        "data": {
          "style": "unordered",
          "meta": {},
          "items": [
            {
              "content": "Without&nbsp;<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em; border-radius: 0.25rem; background-color: rgb(48, 48, 48); padding-inline: 4px; padding-block: 2px; color: rgb(255, 255, 255);\">ConfigureAwait(false)</code>, each request waits for the continuation to return to the original request thread → slows down throughput.",
              "meta": {},
              "items": []
            },
            {
              "content": "With&nbsp;<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em; border-radius: 0.25rem; background-color: rgb(48, 48, 48); padding-inline: 4px; padding-block: 2px; color: rgb(255, 255, 255);\">ConfigureAwait(false)</code>, continuations run on free thread pool threads, improving response time and scalability.",
              "meta": {},
              "items": []
            }
          ]
        }
      },
      {
        "id": "ONhALGqPlE",
        "type": "code",
        "data": {
          "language": "csharp",
          "code": "public async Task<IActionResult> GetUsers()\n{\n    var users = await _userService.GetAllUsersAsync().ConfigureAwait(false);\n    return Ok(users); // safe in ASP.NET Core, no UI thread needed\n}"
        }
      },
      {
        "id": "8_KcA6NENX",
        "type": "header",
        "data": {
          "text": "Best Practices",
          "level": 2
        }
      },
      {
        "id": "pD1n2oSd-N",
        "type": "list",
        "data": {
          "style": "ordered",
          "meta": {},
          "items": [
            {
              "content": "Use&nbsp;<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em; border-radius: 0.25rem; background-color: rgb(48, 48, 48); padding-inline: 4px; padding-block: 2px; color: rgb(255, 255, 255);\">ConfigureAwait(false)</code>&nbsp;in library and server code.",
              "meta": {},
              "items": []
            },
            {
              "content": "In UI code, only use it if you don’t need to update UI controls afterward.",
              "meta": {},
              "items": []
            },
            {
              "content": "Never access UI elements after&nbsp;<code data-start=\"3493\" data-end=\"3516\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em;\">ConfigureAwait(false)</code>&nbsp;in a UI app — it may crash.",
              "meta": {},
              "items": []
            }
          ]
        }
      },
      {
        "id": "6mgjOBqpqj",
        "type": "header",
        "data": {
          "text": "Key Takeaways",
          "level": 2
        }
      },
      {
        "id": "iaXS4XBqHV",
        "type": "list",
        "data": {
          "style": "unordered",
          "meta": {},
          "items": [
            {
              "content": "<code data-start=\"3571\" data-end=\"3594\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em;\">ConfigureAwait(false)</code>&nbsp;improves performance by skipping unnecessary thread switching.",
              "meta": {},
              "items": []
            },
            {
              "content": "It prevents deadlocks in certain cases.",
              "meta": {},
              "items": []
            },
            {
              "content": "Essential for server-side apps and libraries.",
              "meta": {},
              "items": []
            },
            {
              "content": "Use carefully in UI apps to avoid updating controls on the wrong thread.",
              "meta": {},
              "items": []
            }
          ]
        }
      },
      {
        "id": "OTHWOgabkR",
        "type": "header",
        "data": {
          "text": "Summary",
          "level": 2
        }
      },
      {
        "id": "e7QuUeq-Hd",
        "type": "paragraph",
        "data": {
          "text": "<code class=\"bg-[#303030] text-white font-mono px-1 py-[2px] rounded\" style=\"box-sizing: border-box; margin: 0px; padding: 0px; border: 0px solid; font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, &quot;Liberation Mono&quot;, &quot;Courier New&quot;, monospace; font-feature-settings: normal; font-variation-settings: normal; font-size: 1em; border-radius: 0.25rem; background-color: rgb(48, 48, 48); padding-inline: 4px; padding-block: 2px; color: rgb(255, 255, 255);\">ConfigureAwait</code>&nbsp;might look small, but it can make a big difference in performance and reliability. Use it wisely to write fast, scalable, and deadlock-free async code."
        }
      }
    ],
    "version": "2.31.0-rc.7"
  }
}